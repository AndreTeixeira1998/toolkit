#! /usr/bin/env bash

set -euo pipefail

function usage() {
    echo "Usage: bin/init"
    echo ""
    echo "Initialises local configuration files in the 'config/' directory"
    echo ""
}

function check_existing_config() {
    if [[ -f ./config/overleaf.rc ]] || [[ -f ./config/variables.env ]]; then
        echo "ERROR: Config files already exist, exiting "
        exit 1
    fi
}

function set_up_config_files() {
    echo "Copying config files to 'config/'"
    cp ./examples/overleaf.rc ./config/
    cp ./examples/variables.env ./config/
}

function __main__() {
    if [[ "${1:-null}" == "help" ]] || [[ "${1:-null}" == "--help" ]]; then
        usage
        exit
    fi
    check_existing_config
    set_up_config_files
}

__main__ "$@"
